(self.webpackChunkmomentum=self.webpackChunkmomentum||[]).push([[860],{19195:(t,e,s)=>{"use strict";s.d(e,{FZ:()=>n,Ox:()=>d,TF:()=>o,cl:()=>r,mX:()=>h});var i=s(22005),a=s(23145);const n={mixins:[s(44614).Z],data:()=>({collection:new i.F}),unreactive:()=>({type:"",Model:null,dataService:null,names:{}}),computed:{emptyMessage(){return`No ${this.nameLCP} yet`},data(){return this.collection.loaded||this.refresh(),this.collection},visible(){return a.Fl[this.visibleSetting]}},created(){this.dataService||console.warn('No dataService property detected, please connect a dataService property in "unreactive"'),this.$e.$on(this.type+":refresh",this.refresh),this.$e.$on("resetCollections",this.resetCollection)},destroyed(){this.$e.$off(this.type+":refresh",this.refresh),this.$e.$off("resetCollections",this.resetCollection)},methods:{refresh({queryParams:t,mode:e}={}){return new Promise(((s,i)=>{this.dataService.get({queryParams:t,mode:e,success:t=>{this.addItemsToCollection(t),s()},failure:t=>{console.error(t),i(t)}})}))},addItemsToCollection(t,e=this.collection){const s=e.items,i=t.map((t=>t.id));return Object.keys(s).forEach((t=>{i.includes(t)||this.$delete(s,t)})),t.forEach((t=>{const e=t.id;let i;e in s?i=s[e]:(i=new this.Model,this.$set(s,e,i)),i.updateData(t)})),this.$set(e,"loaded",!0),t},add(t){const e=t.id=m.utils.uuidv4();this.$set(this.data.items,e,t);const s=this.getAddRequestBody(t);return this.dataService.add(e,s).then((e=>(this.capture&&this.capture(this.fullNameLCS+" add",{context:{item:t}}),e))).catch((t=>{throw this.$delete(this.data.items,e),t}))},update(t,e){const s=this.getUpdateRequestBody(t,e);return this.dataService.update(t.id,s).then((e=>(this.capture&&this.capture(this.fullNameLCS+" edit",{context:{item:t}}),e)))},delete(t){return this.dataService.delete(t.id).then((e=>(this.capture&&this.capture(this.fullNameLCS+" delete",{context:{item:t}}),this.$delete(this.data.items,t.id),e)))},archive(t){return this.$set(t,"archived",!0),this.dataService.update(t.id,{archived:!0}).then((e=>(this.capture&&this.capture(this.fullNameLCS+" archive",{context:{item:t}}),e))).catch((e=>{throw this.$set(t,"archived",!1),e}))},unarchive(t){return this.$set(t,"archived",!1),this.dataService.update(t.id,{archived:!1}).then((e=>(this.capture&&this.capture(this.fullNameLCS+" unarchive",{context:{item:t}}),e))).catch((e=>{throw this.$set(t,"archived",!0),e}))},getAddRequestBody(t){const e={};return t.props.forEach((s=>{void 0!==t.editProps[s]&&(e[s]=t.editProps[s])})),e},getUpdateRequestBody(t){const e={};return t.getChanges().forEach((s=>{const i=s.split(".");1===i.length?e[s]=t.editProps[s]:2===i.length&&(e[i[1]]=t.editProps[i[0]][i[1]])})),e},resetCollection(){this.collection=new i.F}}},r={data:()=>({listPinnedValues:{}}),computed:{pinnedItems(){return this.data.loaded?Object.values(this.data.items).filter((t=>t.pinned&&!t.archived)):[]}},methods:{considerPinnedInList(t){return this.listPinnedValues[t.id]??t.pinned},sortPinned(t,e,s){const i=this.considerPinnedInList(t),a=this.considerPinnedInList(e);return i&&!a?-1:!i&&a?1:(s="function"==typeof s?s(t,e):s)||(t.id>e.id?-1:t.id<e.id?1:0)},togglePinned(t){const e=this.listPinnedValues[t.id];t.id in this.listPinnedValues||(this.listPinnedValues[t.id]=t.pinned),t.pinned=!t.pinned,this.dataService.update(t.id,{pinned:t.pinned}).then((e=>(this.capture&&this.capture(this.fullNameLCS+(t.pinned?" pin":" unpin"),{context:{item:t}}),e))).catch((()=>{t.pinned=!t.pinned,this.listPinnedValues[t.id]=e}))},clearRecentlyChangedItems(){this.listPinnedValues={}}}},o={created(){this.assignRandomItem()},watch:{"randomItem.pinned"(t){t&&this.assignRandomItem()},"randomItem.archived"(t){t&&this.assignRandomItem()},randomItem(){this.randomItem||this.assignRandomItem()},"dashItems.length"(t){t||this.assignRandomItem()},"itemsArray.length"(t,e){!e&&t&&this.assignRandomItem()}},computed:{itemsArray(){return Object.values(this.data.items)},showRandom(){return a.ax["showRandomMetric-"+this.nameCS]},randomItem(){return Object.values(this.data.items).find((t=>t.random))},dashItems(){const t=!this.randomItem||!this.showRandom&&this.pinnedItems.length?[...this.pinnedItems]:[this.randomItem,...this.pinnedItems];return this.dashSort&&t.sort(this.dashSort),t}},methods:{getRandomItem(t){const e=Object.values(t).filter((t=>!t.pinned&&!t.archived));return e[m.utils.getRandomIntBetween(0,e.length-1)]},assignRandomItem(){const t=this.$watch("data.loaded",(e=>{if(e){this.clearRandomItem();const e=this.getRandomItem(this.data.items);e&&(e.random=!0),this.$nextTick((()=>t()))}}),{immediate:!0})},clearRandomItem(){this.randomItem&&(this.randomItem.random=!1)}}},d={computed:{selectedItem(){return Object.values(this.data.items).find((t=>t.selected))}},methods:{clearSelectedItem(){this.selectedItem&&(this.selectedItem.selected=!1)}}},h={data:()=>({mockCollection:new i.F}),computed:{data(){return this.mockCollection.loaded?this.mockCollection:(this.collection.loaded||this.refresh(),this.collection)}},methods:{addMockData(t){this.addItemsToCollection(t,this.mockCollection),this.mockCollection.loaded=!0},clearMockData(){this.mockCollection=new i.F}}}},71999:(t,e,s)=>{"use strict";s.d(e,{X:()=>a});const i=m.workers.serviceWorker.bus,a={mixins:[{methods:{_mergeQueryParams(...t){return Object.assign.apply(null,[{},this.queryParams.all||{}].concat(t))},_buildQueryString(...t){const e=new URLSearchParams(this._mergeQueryParams.apply(null,t)).toString();return e?"?"+e:""}}}],unreactive:()=>({type:"",path:"",mode:"sync",queryParams:{get:{},update:{}}}),created(){this.type||console.error("dataSyncServiceMixin Error: You must declare a type in unreactive")},methods:{get({path:t=this.path||this.type,success:e,failure:s,queryParams:a,mode:n=this.mode}={}){return t+=this._buildQueryString(this.queryParams.get,a),i.sendRecurringCrossTabMessage({msgId:this.type+":refreshed",handler:"get",args:[this.type,{path:t,env:this._getEnv(),mode:n}],success:e,failure:s})},add(t,e,{path:s=this.path||this.type,mode:a=this.mode}={}){return i.sendMessage({handler:"create",args:[this.type,t,e,{path:s,mode:a,env:this._getEnv()}]})},update(t,e,{path:s=this.path||this.type,mode:a=this.mode,queryParams:n}={}){return i.sendMessage({handler:"update",args:[this.type,t,e,{path:s,mode:a,env:this._getEnv(),queryString:this._buildQueryString(this.queryParams.update,n)}]})},delete(t,{path:e=this.path||this.type,mode:s=this.mode}={}){return i.sendMessage({handler:"delete",args:[this.type,t,{path:e,mode:s,env:this._getEnv()}]})},_getEnv:()=>({token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version})}}},92664:(t,e,s)=>{"use strict";s.d(e,{H:()=>a,Z:()=>i});const i={data:()=>({id:"",archived:null,selected:!1,editProps:{}}),methods:{updateData(t){this.props.forEach((e=>this[e]=t[e])),t.id&&(this.id=t.id)},revertChanges(){this.editProps={}},getChanges(){const t=(t,e)=>t.getTime()===e.getTime();let e=[];return this.editProps&&this.props.forEach((s=>{if(Array.isArray(this[s])||Array.isArray(this.editProps[s]))m.utils.arraysAreEqual(this[s],this.editProps[s])||e.push(s);else if(this[s]instanceof Date&&this.editProps[s]instanceof Date)t(this[s],this.editProps[s])||e.push(s);else if("object"==typeof this.editProps[s]&&null!==this.editProps[s])for(let i in this.editProps[s]){let a,n=this[s][i],r=this.editProps[s][i];a=n instanceof Date&&r instanceof Date?!t(n,r):n!==r,a&&e.push(`${s}.${i}`)}else this[s]!==this.editProps[s]&&e.push(s)})),e},commitChanges(){this.beforeCommitChanges&&this.beforeCommitChanges(),this.props.forEach((t=>{void 0!==this.editProps[t]&&(this[t]=this.editProps[t])})),this.revertChanges()},copyProperties(){for(let t of this.props)Array.isArray(this[t])?this.$set(this.editProps,t,[...this[t]]):"object"==typeof this[t]&&null!==this[t]?this.$set(this.editProps,t,{...this[t]}):this.$set(this.editProps,t,this[t])}}},a={maxCharPerLine:14,computed:{brokenName(){return m.utils.lineBreakString(m.utils.removeTags(this.name),this.$options.maxCharPerLine)}}}},44614:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});var i=s(72783);const a={unreactive:()=>({names:{}}),computed:{nameLCP(){return this.names.lowerCasePlural||this.type.replace(/([A-Z])/g," $1").trim().toLowerCase()},nameLCS(){return this.names.lowerCaseSingular||(0,i.singularize)(this.nameLCP)},nameCP(){return this.names.capitalizedPlural||m.utils.capitalizeWords(this.nameLCP)},nameCS(){return this.names.capitalizedSingular||m.utils.capitalizeWords(this.nameLCS)},fullNameLCP(){return this.names.fullLowerCasePlural||this.nameLCP},fullNameLCS(){return this.names.fullLowerCaseSingular||(0,i.singularize)(this.fullNameLCP)},fullNameCP(){return this.names.fullCapitalizedPlural||m.utils.capitalizeWords(this.fullNameLCP)},fullNameCS(){return this.names.fullCapitalizedSingular||m.utils.capitalizeWords(this.fullNameLCS)}}}},23145:(t,e,s)=>{"use strict";s.d(e,{Fl:()=>n,Jr:()=>d,ax:()=>o});var i=s(48713);const a=new i.Z.observable({}),n=new Proxy(a,{get:(t,e)=>(t.hasOwnProperty(e)||i.Z.set(t,e,m.models.customization.getComputedSetting(e)),t[e]),set:()=>(console.warn('Computed settings cannot be set by reactiveCustomization. Instead set persistent settings with "persistent"'),!1)}),r=new i.Z.observable({}),o=new Proxy(r,{get:(t,e)=>(t.hasOwnProperty(e)||i.Z.set(t,e,m.models.customization.get(e)),t[e]),set:(t,e,s)=>(m.models.customization.save(e,s),i.Z.set(t,e,s),!0)});function d(t={}){Object.entries(t).forEach((([t,e])=>i.Z.set(r,t,e))),m.models.customization.save(t)}m.models.customization.on("change",(t=>{t&&("balanceModeStr"in t.changed&&Object.entries(m.models.customization.attributes).forEach((([t,e])=>i.Z.set(a,t,e))),Object.entries(t.changed).forEach((([t,e])=>{a[t]=m.models.customization.getComputedSetting(t),i.Z.set(r,t,e)})))})),m.on("customization:update",(t=>{t.forEach((t=>{const e=m.models.customization.getComputedSetting(t);i.Z.set(a,t,e),i.Z.set(r,t,e)}))}))},22005:(t,e,s)=>{"use strict";s.d(e,{F:()=>a});var i=s(48713);function a(){return new i.Z.observable({loaded:!1,items:{}})}},19346:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OTIuNDMyIDQ5Mi40MzIiPjxwYXRoIGQ9Ik0xNDIuMjM4IDQ5Mi40MzJjLTkuNzkgMC0xOS41ODgtMy43MzYtMjcuMDUtMTEuMjA5LTE0Ljk0NS0xNC45MzQtMTQuOTQ1LTM5LjE2MiAwLTU0LjA5OGwxODAuOS0xODAuOTA5LTE4MC45LTE4MC45MWMtMTQuOTQ1LTE0LjkzNS0xNC45NDUtMzkuMTYzIDAtNTQuMDk4IDE0LjkyNi0xNC45NDQgMzkuMTcyLTE0Ljk0NCA1NC4wOTggMGwyMDcuOTYgMjA3Ljk1OGMxNC45NDMgMTQuOTM1IDE0Ljk0MyAzOS4xNjQgMCA1NC4xbC0yMDcuOTYgMjA3Ljk1N2MtNy40NjIgNy40NzQtMTcuMjYgMTEuMjA5LTI3LjA0OCAxMS4yMDl6Ij48L3BhdGg+PC9zdmc+Cg=="},79557:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNiAxMCIgZmlsbD0id2hpdGUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAuODg4NTA3IDEwQzAuNjg5Njk4IDEwIDAuNDkwNzI2IDkuOTI0MTMgMC4zMzkxOTMgOS43NzIzN0MwLjAzNTY5ODkgOS40NjkxIDAuMDM1Njk4OSA4Ljk3NzEgMC4zMzkxOTMgOC42NzM3OUw0LjAxMjggNUwwLjMzOTE5MyAxLjMyNjE5QzAuMDM1Njk4OSAxLjAyMjkgMC4wMzU2OTg5IDAuNTMwODk2IDAuMzM5MTkzIDAuMjI3NjA1QzAuNjQyMyAtMC4wNzU4NjgzIDEuMTM0NjcgLTAuMDc1ODY4MyAxLjQzNzc4IDAuMjI3NjA1TDUuNjYwOSA0LjQ1MDY5QzUuOTY0MzUgNC43NTM5OCA1Ljk2NDM1IDUuMjQ2IDUuNjYwOSA1LjU0OTMxTDEuNDM3NzggOS43NzIzN0MxLjI4NjI1IDkuOTI0MTUgMS4wODcyOCAxMCAwLjg4ODUwNyAxMFYxMFoiIC8+PC9zdmc+Cg=="},69318:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNDI3LjI1MiA5My45MzljLTQyLjUwMy0yNi4yNjgtOTcuMDQ2LTM1LjI5MS0xNDMuNTQxLTI1LjY0MWwuMDEtLjAyMUMyOTMuMjM2IDQ5LjI1IDMwOS45IDQwIDMzNC42NjcgNDBjMTEuMDQ2IDAgMjAtOC45NTQgMjAtMjBzLTguOTU0LTIwLTIwLTIwQzMwMy4wODQgMCAyNzQuNjk2IDExLjEwOSAyNTYgCTM3LjAyOSAyMzcuMzA1IDExLjExMSAyMDguOTE4IDAgMTc3LjMzMyAwYy0xMS4wNDYgMC0yMCA4Ljk1NC0yMCAyMHM4Ljk1NCAyMCAyMCAyMGMyNC4zMzMgMCA0MC44MjggOC45MTkgNTAuNDI4IDI3LjI2Ny4xOC4zNDMuMzUxLjY4Ny41MjMgMS4wMzFDMTI2LjY1MiA0Ny4yMDYgMCAxMTAuNTE4IDAgMjU1Ljk1OCAwIDM5NC44NjIgOTYuNTk5IDUxMiAyNTYgNTEyYzE1OS4wMDkgMCAyNTYtMTE2LjczMSAyNTYtMjU2LjA0MiAwLTcwLjcwMy0zMC4wOTgtMTI4LjI0My04NC43NDgtMTYyLjAxOXptLTE4MC4xOTYgMjIuNjE2YTIwLjA3IDIwLjA3IDAgMCAwIDE3Ljg4OSAwYzY4LjUzMS0zNC4yNjkgMjE4LjY1NS0uMzk1IDIwNi4yOTYgMTU4Ljc3OGgtOTYuNTc0VjI1NmMwLTExLjA0Ni04Ljk1NC0yMC0yMC0yMHMtMjAgOC45NTQtMjAgMjB2MTkuMzMzSDI3NnYtNTguNjY3YzAtMTEuMDQ2LTguOTU0LTIwLTIwLTIwcy0yMCA4Ljk1NC0yMCAyMHY1OC42NjdoLTU4LjY2N1YyNTZjMC0xMS4wNDYtOC45NTQtMjAtMjAtMjBzLTIwIDguOTU0LTIwIDIwdjE5LjMzM0g0MC43NkMyOC41MjEgMTE3LjcxMiAxNzcuMjE5IDgxLjYzOCAyNDcuMDU2IDExNi41NTV6TTI1NiA0NzJjLTExMS45MDggMC0xODUuNjg0LTY1LjMxNS0yMDguNzI3LTE1Ni42NjdoNDE3LjQ1M0M0NDEuNzI4IDQwNi41MDggMzY4LjExNSA0NzIgMjU2IDQ3MnptMzMuODA5LTkyLjQ3NmM3LjgxMSA3LjgxMSA3LjgxMSAyMC40NzQgMCAyOC4yODQtNy44MTEgNy44MTEtMjAuNDc0IDcuODEtMjguMjg0IDBMMjU2IDQwMi4yODRsLTUuNTI0IDUuNTI0Yy03LjgxMSA3LjgxMS0yMC40NzQgNy44MTEtMjguMjg0IDBzLTcuODExLTIwLjQ3NCAwLTI4LjI4NGwxOS42NjctMTkuNjY3YzcuODExLTcuODExIDIwLjQ3NC03LjgxMSAyOC4yODQgMHoiIC8+PC9zdmc+Cg=="}}]);
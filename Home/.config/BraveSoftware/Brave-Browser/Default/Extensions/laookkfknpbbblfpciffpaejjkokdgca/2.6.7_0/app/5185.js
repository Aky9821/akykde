(self.webpackChunkmomentum=self.webpackChunkmomentum||[]).push([[5185],{47376:(t,e,i)=>{(t.exports=i(23645)(!1)).push([t.id,"\n.app[data-v-6eb8778d] { --top: auto; --bottom: auto; --right: auto; --left: auto; width: var(--width); height: auto; min-height: auto; position: absolute; top: var(--top); bottom: var(--bottom); right: var(--right); left: var(--left); display: flex; flex-direction: column; align-items: stretch; background-color: var(--color-bg); border-radius: var(--border-radius);  transition: top 0.2s ease, right 0.2s ease;\n}\n.nipple-top-left[data-v-6eb8778d]:after, .nipple-bottom-left[data-v-6eb8778d]:after { left: var(--nipple-displacement);\n}\n.nipple-top-right[data-v-6eb8778d]:after, .nipple-bottom-right[data-v-6eb8778d]:after { right: var(--nipple-displacement);\n}\n\t/* This needs to be in this component (or general stylesheet) or else the transition won't work when the component is async. I don't know why. */\n.slide-down-fade-enter-active[data-v-6eb8778d], .slide-down-fade-leave-active[data-v-6eb8778d] { transition: transform 0.2s ease, opacity, 0.2s ease, right 0s, top 0s\n} /* right 0s, top 0s is to fix a case where the app transitions right when opening if it is flipping horizontal direction */\n.slide-down-fade-enter[data-v-6eb8778d], .slide-down-fade-leave-to[data-v-6eb8778d] { transform: translateY(-3px); opacity: 0;\n}\n@media screen and (max-width: 450px) {\n.app.slide-down-fade-enter-active[data-v-6eb8778d], .app.slide-down-fade-leave-active[data-v-6eb8778d] { transition: transform 0.2s ease, opacity, 0.2s ease, right 0s, top 0s\n} /* right 0s, top 0s is to fix a case where the app transitions right when opening if it is flipping horizontal direction */\n.app.slide-down-fade-enter[data-v-6eb8778d], .app.slide-down-fade-leave-to[data-v-6eb8778d] { transform: translateY(calc(var(--app-translate-amount) * -1)); opacity: 0;\n}\n}\n\n",""])},45185:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],ref:"app",staticClass:"app popup nipple",class:["display-"+t.positionArray[0],"display-"+t.positionArray[1],t.nippleClass],style:[{"--width":t.width+"px","--nipple-displacement":t.shiftedNippleDisplacement+"px"},t.positionCss],attrs:{"data-test":"app-popup"}},[t._t("default")],2)};s._withStripped=!0;var o=i(5111),n=i(50931);const a={name:"AppPopup",doNotWaitForMount:!0,directives:{clickOutside:o.Z},unreactive:()=>({halfNippleWidth:m.constants.nippleWidthPx/2}),props:{nippleDisplacement:{type:Number,default:m.constants.nippleDisplacementPx},width:{type:Number,default:300},viewManager:{type:Object,default:null},position:{type:String,required:!0},detailedPosition:{type:Object,default:null},region:{type:[String,Array],required:!0}},data:()=>({flipHorizontalPosition:!1,shiftByPx:0}),computed:{positionArray(){const t=this.position.split("-");return this.flipHorizontalPosition&&(t[1]=m.utils.getOppositePosition(t[1])),t},nippleClass(){return["nipple"].concat(this.positionArray.map(m.utils.getOppositePosition)).join("-")},positionCss(){const t=this.detailedPosition||{[m.utils.getOppositePosition(this.positionArray[0])]:"100%",[m.utils.getOppositePosition(this.positionArray[1])]:"50%"};return Object.entries(t).reduce(((t,[e,i])=>(["left","right"].includes(e)&&("number"==typeof i?i=i-(this.flipHorizontalPosition?this.width-2*this.nippleDisplacement:0)-this.shiftByPx:"string"==typeof i&&(i=`calc(${i} - ${this.nippleDisplacement-this.shiftByPx}px)`)),t["--"+e]="number"==typeof i?i+"px":i,t)),{})},shiftedNippleDisplacement(){return this.nippleDisplacement-this.halfNippleWidth-this.shiftByPx}},mounted(){this.flipHorizontalPosition=this.shouldFlipHorizontalPosition(),this.$nextTick((()=>this.shiftByPx=this.getShiftPx())),this.hideOverlappingWidgets()},created(){n.Z.registerEventListener("closeApp","keyup",27,this.close),window.addEventListener("resize",this.onWindowResize)},destroyed(){n.Z.removeEventListener("closeApp","keyup",27),window.removeEventListener("resize",this.onWindowResize),m.widgetManager.refocusOverlap(this.region)},methods:{onClickOutside(t){this.viewManager?this.viewManager.awaitCloseConfirmationIfNeeded().then((()=>this.$emit("clickOutside",t))):this.$emit("close")},onWindowResize(){this.disableSmoothReflow=!0,clearTimeout(this.debouceResize),this.debouceResize=setTimeout((()=>{this.disableSmoothReflow=!1}),500)},shouldFlipHorizontalPosition(){const t=this.$refs.app&&this.$refs.app.getBoundingClientRect();return!!t&&t.left<0},getShiftPx(){const t=this.$refs.app&&this.$refs.app.getBoundingClientRect();return t?"left"===this.positionArray[1]?Math.max(t.right-(window.innerWidth-m.constants.dashboardSidePaddingPx),0):Math.max(-1*(t.left-m.constants.dashboardSidePaddingPx),0):0},close(){this.$emit("close")},hideOverlappingWidgets(){var t,e;let i=(null===(t=this.$refs.view)||void 0===t?void 0:t.scrollHeight)||(null===(e=this.$refs.loading)||void 0===e?void 0:e.scrollHeight);i&&m.widgetManager.unfocusOverlap(this.region,i)}}};i(9829);var p=(0,i(51900).Z)(a,s,[],!1,null,"6eb8778d",null);p.options.__file="source/addins-vue/shared_components/AppPopup.vue";const r=p.exports},9829:(t,e,i)=>{var s=i(47376);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,i(45346).Z)("7faa791e",s,!1,{ssrId:!0})}}]);